<?xml version="1.0" encoding="UTF-8"?>
<sqls>
    <sql id="assertSelectSumWithGroupBy" value="SELECT SUM(order_id) AS orders_sum, user_id FROM t_order GROUP BY user_id">
        <sharding-rule>
            <data expected="select_group_by/SelectSum.xml" />
        </sharding-rule>
    </sql>
    <sql id="assertSelectCountWithGroupBy" value="SELECT COUNT(order_id) AS orders_count, user_id FROM t_order GROUP BY user_id">
        <sharding-rule>
            <data expected="select_group_by/SelectCount.xml" />
        </sharding-rule>
    </sql>
    <sql id="assertSelectMaxWithGroupBy" value="SELECT MAX(order_id) AS max_order_id, user_id FROM t_order GROUP BY user_id">
        <sharding-rule>
            <data expected="select_group_by/SelectMax.xml" />
        </sharding-rule>
    </sql>
    <sql id="assertSelectMinWithGroupBy" value="SELECT MIN(order_id) AS min_order_id, user_id FROM t_order GROUP BY user_id">
        <sharding-rule>
            <data expected="select_group_by/SelectMin.xml" />
        </sharding-rule>
    </sql>
    <sql id="assertSelectAvgWithGroupBy" value="SELECT AVG(order_id) AS orders_avg, user_id FROM t_order GROUP BY user_id">
        <sharding-rule>
            <data expected="select_group_by/SelectAvg.xml" />
        </sharding-rule>
    </sql>
    <sql id="assertSelectOrderByDescWithGroupBy" value="SELECT SUM(order_id) AS orders_sum, user_id FROM t_order GROUP BY user_id ORDER BY orders_sum DESC">
        <sharding-rule>
            <data expected="select_group_by/SelectOrderByDesc.xml" />
        </sharding-rule>
    </sql>
    <sql id="assertSelectCountWithoutGroupedColumn" value="SELECT count(*) as items_count FROM t_order o JOIN t_order_item i ON o.user_id = i.user_id AND o.order_id = i.order_id WHERE o.user_id IN (%s, %s) AND o.order_id BETWEEN %s AND %s GROUP BY o.user_id">
        <sharding-rule>
            <data parameter="10,11,1000,1109" expected="select_group_by/SelectGroupByWithoutGroupedColumn.xml" />
            <data parameter="1,9,1000,1909"/>
        </sharding-rule>
    </sql>
    <sql id="assertSelectCountWithGroupByBindingTable" value="SELECT count(*) as items_count, o.user_id FROM t_order o JOIN t_order_item i ON o.user_id = i.user_id AND o.order_id = i.order_id WHERE o.user_id IN (%s, %s) AND o.order_id BETWEEN %s AND %s GROUP BY o.user_id">
        <sharding-rule>
            <data parameter="10,11,1000,1109" expected="select_group_by/SelectGroupByWithBindingTable.xml" />
            <data parameter="1,9,1000,1909"/>
        </sharding-rule>
    </sql>
</sqls>
